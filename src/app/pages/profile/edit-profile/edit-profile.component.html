<div class="container">
  <div class="row">
    <div class="col">
      <h1 class="mt-5">Modifier votre profil</h1>
    </div>
  </div>
  <div class="row d-flex justify-content-center">
    <div class="col-7 bg-blue my-5">
      <div class="profile-pic-wrapper" (click)="triggerFileInput()">
      <img class="profilePic" src="{{imageUrl}}{{user?.photoProfil}}" />
        <div class="overlay">
          <span>Modifier</span>
        </div>
        </div>
      <input type="file" #fileInput (change)="onFileSelected($event)" style="display: none;" />

      <form (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label class="form-label">Adresse e-mail</label>
          <input type="email" class="form-control" [(ngModel)]="email" name="email">
          <div id="emailHelp" class="form-text">Elle restera entre nous</div>
        </div>
        <div class="mb-3">
          <label class="form-label">Mot de passe</label>
          <input type="password" class="form-control" [(ngModel)]="password" name="password">
          @if(passwordError){
          <div class="text-danger mt-1">
            Le mot de passe doit contenir au moins 8 caractères.
          </div>
          }
        </div>
        <div class="d-flex mb-3">
          <div class="me-5">
            <label class="form-label">Nom</label>
            <input type="text" class="form-control" [(ngModel)]="lastName" name="lastName">
          </div>
          <div>
            <label class="form-label">Prénom</label>
            <input type="text" class="form-control" [(ngModel)]="firstName" name="firstName">
          </div>
        </div>

        <div class="d-flex mb-3">
          <div class="me-5">
        <div class="mb-3">
          <label class="form-label">Numéro de rue</label>
          <input type="text" class="form-control" [(ngModel)]="streetNumber" name="streetNumber">
        </div>
          </div>

        <div class="mb-3">
          <label class="form-label">Nom de la rue</label>
          <input type="text" class="form-control" [(ngModel)]="streetName" name="streetName">
        </div>
        </div>

        <div class="d-flex mb-3">
          <div class="me-5">
        <div class="mb-3">
          <label class="form-label">Code postal</label>
          <input type="text" class="form-control" [(ngModel)]="postalCode" name="postalCode">
        </div>
          </div>

        <div class="mb-3">
          <label class="form-label">Ville</label>
          <input type="text" class="form-control" [(ngModel)]="city" name="city">
        </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Téléphone</label>
          <input type="text" class="form-control" [(ngModel)]="telephone" name="telephone">
        </div>
        <div class="mb-3">
          <label class="form-label">Nom d'utilisateur</label>
          <input type="text" class="form-control" [(ngModel)]="username" name="username">
        </div>
        <div class="mb-3">
          <label class="form-label">Date de naissance</label>
          <input type="date" class="form-control" [(ngModel)]="birthday" name="birthday">
        </div>

        <button type="submit">Enregistrer<span class="emoji ms-2">⚡</span> </button>

        @if(successMessage) {
        <div class="alert alert-success mt-3">
          {{ successMessage }}
        </div>}
      </form>

    </div>
  </div>
</div>
